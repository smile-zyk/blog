# 物理层的基本概念
物理层解决如何在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。  
物理层的主要任务：确定与传输媒体接口有关的一些特性(定义标准)。  
1. 机械特性：定义物理连接的特性，规定物理连接时所采用的规格、接口形状、引线数目、引脚数量和排列情况。  
2. 电气特性：规定传输二进制位时，线路上信号的电压范围、阻抗匹配、传输速率和距离限制等。
3. 功能特性：指明某条线上出现的某一电平表示何种意义，接口部件的信号线的用途。
4. 规程(过程)特性：定义各条物理线路的工作规程和时序关系。  

# 通信基础
通信的目的是传送消息
## 一个典型的数据通信模型
![QQ截图20201209151233.png](https://i.loli.net/2020/12/09/3f7wZc2Q69LhWDA.png)  
一个数据通信系统主要包含：
1. 信源
2. 发送器
3. 传输系统
4. 接收器
5. 信宿  

一般把信源和发送器称为源系统，不接收器和信宿称为目的系统，源系统、传输系统、目的系统共同构成了通信系统。  
## 三种通信方式
1. 单工通信：只有一个方向的通信没有反方向的交互，仅需要一条信道。
2. 半双工通信：通信的双方都可以发送或接收信息，但任何一方都不能同时发送和接收，需要两条信道。
3. 全双工通信：通信双方可以同时发送和接受信息，也需要两条信道。

## 两种数据传输方式

```
graph LR
传输方式-->串行传输
传输方式-->并行传输
```
![QQ截图20201209153558.png](https://i.loli.net/2020/12/09/K5kjQZMWdAUuBSH.png)  
串行的传输速度慢，费用低，适合远距离。  
并行的传输速度块，费用高，适合近距离。(计算机内部就使用并行传输，称接口为并口)。  

## 数据通信的相关术语
### 数据
传送信息的实体，数据可以是连续的值，比如声音、图像，称为模拟数据；也可以是离散的，如符号、文字，称为数字数据。  
### 信号
数据的电气/电磁的表现，是数据在传输过程中的存在形式。  
- 数字信号：代表消息的参数取值是离散的。  
- 模拟信号：代表消息的参数取值是连续的。  

按照信号在传输时的表现又可以分为基带信号、频带信号、宽带信号
#### 基带信号  
基带信号就是直接来字信源的信号，可以是数字信号，也可以是模拟信号，(如计算机中的信息为0或者1，将其表示为不同的电平发出的信号为数字信号；而我们发出的声波则为模拟信号)。  
基带信号的频率没有限制，可以是从0到无限的频率。由于其频率往往较低，在小范围网络中传输信息，一般都使用基带信号。但如果要进行长距离传输，低频信号的传播无法满足。  
#### 频带信号  
又称为带通信号，在通信中，由于基带信号具有频率很低的频谱分量,出于抗干扰和提高传输率考虑一般不宜直接传输,需要经过调制器把基带信号变换成其频带适合在信道中传输的信号，变换后的信号就是频带信号，接收端再通过相应的解调器进行解调。  
频带信号为模拟信号。  
#### 宽带信号  
与频带信号类似，不同的是，宽带信号在传输时会把信道分成多个子信道(频分复用技术)，分别传送不同的信息，以提高传输效率。  

### 信道
信道：信号的传输媒介。一般用来表示向某一个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接收信道。  

```
graph LR
信道-->按传输信号分
信道-->按传输介质分
按传输信号分-->模拟信道(传输模拟信号)
按传输信号分-->数字信道(传输数字信号)
按传输介质分-->无限信道
按传输介质分-->有线信道
```

### 码元
码元是指用一个固定时长的信号波形(数字脉冲)，代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为k进制码元，而该时长称为码元宽度。当码元的离散状态有M个时(M大于2)，此时码元为M进制码元。
1码元可以携带多个比特的信息量。例如，在使用二进制编码时，只有两种不同的码元，一种代表0状态，另一种代表1状态。  
如果规定了四种基本波形，那么可以说这个码元为4进制码元，其对应的离散数值一般为:00、01、10、11。  

### 速率
速率也叫数据率，是指数据的传输速率，表示单位时间内传输的数据量，可以用码元传输速率和信息传输速率表示。  
1. 码元传输速率：别名码元速率、波形速率、调制速率、符号速率等，它表示单位时间内数字通信系统所传输的码元个数(也可称为脉冲个数或信号变化的次数)，单位是波特(Baud)。1波特表示数字信号传输系统每秒传输一个码元。这里的码元可以是多进制的，也可以是二进制的，但码元速率与进制数无关。(即一秒传输多少个码元)。  
2. 信息传输速率：别名信息速率、比特速率，表示单位时间内数字通信系统传输二进制码元个数(即比特数)，单位是比特/秒(b/s)。  
关系：若一个码元携带*n*bit信息量，则M Baud的码元传输速率所对应的信息传输速率为M×*n* bit/s。  
如何计算一个码元携带多少bit信息？log2(进制数/状态数)向上取整。  
3. 带宽：表示在单位时间内从网络中的某一点到另一点所能通过的"最高数据率"，常用来表示网络的通信线路所能传输数据的能力。单位是b/s。  

## 编码&调制
![QQ截图20201209160626.png](https://i.loli.net/2020/12/09/sVWbOCkcXAqLpPK.png)
> 注：将基带信号(一般指的是计算机发出的数字基带信号)编码为合适的数字信号(如曼切斯特编码)又称为基带调制。  
将基带信号调制为模拟信号一般称为带通调制。

### 数字数据编码为数字信号
![](https://img-blog.csdnimg.cn/20190804210807302.png)  
![QQ截图20201209164225.png](https://i.loli.net/2020/12/09/LQHcab2AgM1Iqwv.png)

#### 不归零编码（NRZ）  
正电平代表1，负电平代表0。
如果连续1和0无法识别(没有自同步能力)

#### 归零编码（RZ）  
正脉冲代表1，负脉冲代表0。  
信号电平在一个码元之内都要恢复到零的编码方式。

#### 曼切斯特编码（Manchester Code）  
位周期中心的向上跳变代表0或1，位周期中心的向下跳代表1或0。曼彻斯特编码主要应用于以太网。  
**PS：数据传输速率（比特率）只有调制速率（波特速率）的1/2**

#### 差分曼切斯特编码  
在每一位的中心处始终都有跳变。位开始边界有跳变代表0，而位开始边界没有跳变代表1。差分曼彻斯特编码抗干扰性强，可以实现自同步，主要应用于局域网。  
和曼切斯特编码一样，数据传输率(比特率)只有调制速率(波特速率)的1/2。  

#### 反向不归零编码(NRZI)  
信号电平翻转表示0，信号电平不变表示1。如果信号全为1无法识别(没有自同步能力)。  

### 数字数据调制为模拟信号
数字数据调制技术在发送端将数字信号转换为模拟信号，而在接受端将模拟信号还原为数字信号，分别对应于调制解调器的调制和解调过程。
![微信截图_20201215180019.png](https://i.loli.net/2020/12/15/iGVyFSosKzLmT98.png)

#### 调幅(AM)
不同的振幅代表不同的码元情况。

#### 调频(FM)
不同的频率代表不同的码元情况。

#### 调相(PM)
不同的波形(比如正弦波和余弦波)代表不同的码元情况。

#### 调幅+调相(QAM)
在不同波形的情况下细分不同振幅来达到波形数量乘以振幅数量的码元情况。

## 信道的传输极限
### 失真
![微信截图_20201215182227.png](https://i.loli.net/2020/12/15/BTZR2oGLpiUaPne.png)  
影响失真程度的因素：
1. 码元传输速率
2. 信号传输速率
3. 噪声干扰
4. 传输媒体质量  

#### 码间串扰
模拟信道的带宽是可以通过信道的最高频率减去可以通过信道的最低频率(区别于数字信道)。  
![微信截图_20201215185713.png](https://i.loli.net/2020/12/15/WlNda4qL7u3pzro.png)
如果码元传输速度过快超过了带宽范围，就会导致码间串扰。  

### 奈奎斯特定理(奈氏准则)
在理想低通(无噪声，带宽受限)条件下，为了避免码间串扰，极限码元传输速率为2W Baud，W是信道带宽，单位是Hz。  
根据码元传输速率和数据传输速率的关系可以得到：  
理想低通信道下的极限数据传输率=2Wlog<sub>2</sub>V(b/s)（其中V代表码元有几种不同的离散电平数目）。  
在任何信道中，码元传输的速率是有上限的。若传输速率超过此上限，就会出现严重的码间串扰问题，使接收端对码元的完全正确识别成为不可能。  

### 香农公式(香农定理)
噪声存在于所有电子设备和通信信道中。由于噪声随机产生，它的瞬时值有时会很大，因此噪声会使接受端对码元判决产生错误。但是噪声的影响是相对的，若信号较强，那么噪声影响相对较小。因此，信噪比就很重要。  
信噪比=信号的平均功率/噪声的平均功率，常记为S/N，并用分贝(dB)作为度量单位：  
信噪比(dB)=10log<sub>10</sub>(S/N)  
香农定理：在带宽受限且有噪声的信道中，为了不产生误差，信息的数据传输速率有上限值。  
信道的极限数据传输速率=Wlog<sub>2</sub>(1+S/N)（b/s）  
由此我们可以知道：
1. 信息的带宽或信道中的信噪比越大，则信息的极限传输速率越高。  
2. 对一定的传输带宽和一定的信噪比，信息传输速率的上限就确定了。  
3. 只要信息的传输速率低于信道的极限传输速率，就一定能找到某种方法来实现无差错的传输。  
4. 香农定理得出的为极限信息传输速率，实际信道能达到的传输速率要比它低不少。  

## 物理层传输介质
传输介质也称为传输媒体/传输媒介，它就是数据传输系统中在发送设备和接收设备之间的物理通路。  
> 注意：  
传输媒体并不是物理层。传输媒体在物理层的下面，因为物理层在体系结构的第一层，因此有时称传输媒体为第0层。在传输媒体中传输的是信号，但传输媒体并不知道所传输的信号代表什么意思。但物理层规定了电气特性，因此能够识别所传送的比特流。  

```
graph LR
传输介质-->导向性传输介质
传输介质-->非导向性传输介质
导向性传输介质-->电磁波导向沿着固体媒体铜线/光纤传播
非导向性传输介质-->自由空间介质可以是空气真空海水等

```

### 导向性传输介质
#### 双绞线
双绞线是古老、又最常用的传输介质，它由两根采用一定规则并排绞合的、相互绝缘的通道线组成。  
**绞合可以减少对相邻导线的电磁干扰。**  
为了进一步提高抗电磁干扰能力，可在双绞线的外面再加一个由金属丝编织成的屏蔽层，这就是屏蔽双绞线(STP),无屏蔽层的双绞线就称为非屏蔽双绞线(UTP)。  
![微信截图_20201216152046.png](https://i.loli.net/2020/12/16/ShU6VeDa3KGtBjr.png)  
![微信截图_20201216152036.png](https://i.loli.net/2020/12/16/OnjrREvYxDJyB1C.png)  
双绞线价格便宜，是最常用的传输介质之一，在局域网和传统电话网中普遍使用。模拟传输和数字传输都可以使用双绞线，其通信距离一般为几公里到数十公里，距离太远时，对于模拟传输，要用放大器放大衰减的信号；对于数字传输，要用中继器将失真的信号整形。  


