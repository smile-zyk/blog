# 计算机网络的基本认识
## 计算机网络的概念
计算机网络:是一个将分散、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。  
![微信截图_20201022131130.png](https://i.loli.net/2020/10/22/9WrIZkqx57S8XUi.png)

- 计算机网络是互连的、自治的计算机集合。  
互连-互联互通  
自治-无主从关系

## 计算机网络的功能
1. **数据通信(连通性)**
2. **资源共享(硬件、软件、数据)**
3. 分布式处理(多台计算机各自承担同一工作任务的不同部分)
4. 提高可靠性
5. 负载均衡

## 计算机网络的组成
1. 组成部分：硬件、软件、协议  
![微信截图_20201022131007.png](https://i.loli.net/2020/10/22/mFODSiqw81pETW5.png)
2. 工作方式  
![微信截图_20201022131730.png](https://i.loli.net/2020/10/22/WdDzsE9PHuVQKrp.png)
```
graph LR
工作方式-->边缘部分:用户直接使用
工作方式-->核心部分:为边缘部分提供服务
边缘部分:用户直接使用-->C/S方式
边缘部分:用户直接使用-->P2P方式
```
3. 功能组成  
![微信截图_20201022132151.png](https://i.loli.net/2020/10/22/BaFfPsM3qvcLWJ1.png)
    - 通信子网:实现数据通信
    - 资源子网:实现资源共享/数据处理

## 计算机网络的数据交换方式 
互联网核心部分的数据交换方式  
参考[电路交换、报文交换、分组交换的区别和优缺点](https://blog.csdn.net/weixin_42449534/article/details/96615313)  
### 报文交换和分组交换的不同：  
1. 报文交换不限制数据块的大小，因此需要路由器有足够大的缓存，而分组交换则不需要，分组交换的数据块大小固定。
2. 报文交换的数据块如果过大的话会造成阻塞(因为要进行存储转发等操作)，有较大的时延。而分组交换的时延较小，因为分组交换的数据块较小，在进行存储转发时的时延也更小。
3. 分组交换会把一个大文件分割成小的数据块并加以编号，因此可能会出现失序、丢失、重复等问题。

### 三种交换的传输对比图
![QQ截图20201208211256.png](https://i.loli.net/2020/12/08/M7QXpEoybj9eGS5.png)

## 计算机网络的分类
1. 按分布范围分
    - 广域网WAN(交换技术)
    - 城域网MAN
    - 局域网WAN(广播技术)
    - 个人区域网PAN
2. 按使用者分
    - 公用网:中国电信
    - 专用网:军队网络，政府网络
3. 按交换技术分
    - 电路交换
    - 报文交换
    - 分组交换
4. 按拓扑结构分
![微信截图_20201022132802.png](https://i.loli.net/2020/10/22/qZDWeJyUX2CkscF.png)
5. 按传输技术分
    - 广播式网络 共享公共通信信道
    - 点对点网络 使用分组存储转发和路由选择机制

## 总结
![微信截图_20201022133343.png](https://i.loli.net/2020/10/22/KB8DxVCQk5mp2dt.png)

# 计算机网络的标准化工作
```
graph LR
标准的分类-->法定标准
标准的分类-->事实标准
法定标准-->OSI参考模型
事实标准-->TCP/IP协议
```
## RFC--因特网标准的形式
RFC要上升为因特网正式标准的四个阶段
1. 因特网草案(Internet Draft)这个阶段还不是RFC文档
2. 建议标准(Proposed Standard)从这个阶段开始成为RFC文档
3. 草案标准(Draft Standard)
4. 因特网标准(Internet Standard)

## 标准化工作的相关组织
- **国际标准化组织ISO OSI参考模型、HDLC协议**
- 国际电信联盟ITU 制定通信规则
- 国际电气电子工程师协会IEEE 学术机构、IEEE802系列标准、5G
- Internet工程任务组IETF 负责因特网相关标准的制定 RFC XXXX

## 总结
![](https://i.loli.net/2020/10/22/GhzVwdjvyIHTpAe.png)
# 计算机网络的性能指标
- 速率
    - 定义  
    速率即数据率或称数据传输率或比特率  
    连接在计算机网络上的主机在数字信道上传送数据位数的速率  
    - 单位  
    b/s,kb/s,Mb/s,Gb/s,Tb/s
    - 计算方法  
    速率=发送数据量/发送时间
> 表示速率时1kb/s=10^3b/s(其他单位一样)。  
表示存储容量时1KB=2^10B。(这里的B代表字节)
- 带宽
    - 定义   
    "带宽"原本指的是某个信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹(Hz)。
    计算机网络中，带宽用来表示网络的通信线路传送数据的能力，通常是指单位时间内从网络中的某一点到另一点所能通过的“最高数据率”。单位和速率一样。
    - 理解  
    **带宽指的是在链路入口的位置发送数据的速率，而不是链路在传播时 的速度。**
> 带宽的单位在模拟信号系统和数字信号系统中是不同的。
> 1. 在模拟信号系统又叫频宽，是指在固定的时间可传输的资料数量，亦即在传输管道中可以传递数据的能力。通常以每秒传送周期或赫兹(Hz)来表示。
> 2. 在数字设备中，带宽指单位时间能通过链路的数据量。通常以bps来表示，即每秒可传输之位数。
- 吞吐量
    - 定义  
    表示在单位时间内通过某个网络(或信道、接口)的数据量。吞吐量受网络的带宽或网络的额定速率的限制。
    - 单位  
    b/s,kb/s,Mb/s,Gb/s。
- 时延
    - 定义：指数据(报文/分组/比特流)从网络(或链路)的一段传送到另一端所需的时间。也叫延迟或迟延。 
    - 单位  
    s
    - 计算方法  
    时延=发送时延+传播时延+排队时延+处理时延  
    发送时延=数据长度/信道带宽(发送速率)  
    传播时延=信道长度/电磁波在信道上的传播速率  
- 时延带宽积
    - 定义  
    时延带宽积又称为以比特为单位的链路长度，即“某段链路现在有多少比特”。  
![微信截图_20201022150914.png](https://i.loli.net/2020/10/22/ysq4xlkHaQtd9Re.png)
    - 单位  
    bit
    - 计算方法  
    时延带宽积=传播时延*带宽
- 往返时延RTT
    - 定义  
    从发送放发送数据开始，到发送方手到接收方的确认(接收方收到数据立刻发送确认)总共经历的时延。RTT越大，在收到确认之前，可以发送的数据越多  
    - 单位
    s
    - 计算方法  
    RTT=传播时延*2+末端处理时间
- 利用率
    - 定义  
    利用率是信道的使用效率，包括信道利用率和网络利用率。  
    - 计算方法
    信道利用率=有数据通过的时间/（有+无）数据通过的时间  
    网络利用率=信道利用率加权平均值。
    - 利用率越高时延越长。
## 总结
![QQ截图20201207110705.png](https://i.loli.net/2020/12/07/e8SXdFK9Np5Iumv.png)

# 计算机网络的分层结构
## 计算机网络体系结构
计算机网络体系结构是计算机网络的各层及其协议的集合。
体系结构是抽象的，而实现是指能运行的一些软件和硬件。  
计算机网络的分层主要是以协议划分的。不同层次有不同的协议。  
实现计算机网络的分层的重要概念有:实体、协议、服务、接口(访问服务点SAP)  
### 实体、协议、服务、接口
- 实体：表示任何可发送和接受信息的硬件或软件进程
    - 对等实体：指在信息传输过程中处于相同层次，具有相同地位的实体之间的关系。
- 协议：协议由语法、语义和同步三部分组成。
    - **语法**规定了传输数据的格式。
    - **语义**规定了所要完成的功能，即需要发出何种控制信息、完成何种动作及做出何种应答。
    - **同步**规定了执行各种操作的条件、时序关系等，即事件实现顺序的详细说明。
    - 协议是控制两个(或多个)对等实体进行通信的规则的集合，是**水平**的。不对等实体之间是没有协议的。
    - 一个完整的协议通常应具有线路管理(建立、释放连接)、差错控制、流量控制、分段和重装、复用和连接等功能。
- 接口(访问服务点SAP)：接口是同一结点内相邻两层间交换信息的连接点，是上层使用下层服务的入口，是一个系统内部的规定。
- 服务：下层为上层提供的功能调用，它是**垂直**的。对等实体在协议的控制下，使得本层能为上一层提供服务，但要实现本层协议还需要使用下层所提供的服务。上层使用下层所提供的服务时必须与下层交换一些命令，这些命令在OSI中称为服务原语。主要有四类：
    - **请求**(Request)：由服务用户发往服务提供者，请求完成某项工作。
    - **指示**(Indication)：由服务提供者发往服务用户，指示用户做某件事情。
    - **响应**(Response)：由服务用户发往服务提供者，作为对指示的响应。
    - **证实**(Confirmation)：由服务提供者发往服务用户，作为对请求的证实。  
  

### 层与层之间的数据通信
层与层之间交换的数据单位为服务数据单元SDU(Service Data Unit)，它可以与协议数据单元PDU(Protocol Data Unit)(对等实体交换信息)不一样。PDU中可能包含协议控制信息PCI(Protocol Control Information)。如图所示：  
![QQ截图20201207124101.png](https://i.loli.net/2020/12/07/ZGqW4OjsgX1Kmvz.png)

## 分层的基本原则
- 各层之间相互独立，每层只实现一种相对独立的功能。
- 每层之间接口自然清晰，易于理解，相互交流尽可能少。
- 结构上可分割开。每层都采用最合适的技术来实现。
- 保持下层对上层的独立性，**上层单向使用下层提供的服务**。
- 整个分层结构应该能促进标准化工作。

## 计算机网络的分层模型
1. 7层OSI参考模型(法定标准)
2. 4层TCP/IP参考模型(事实标准)
3. 5层体系结构(计算机网络(第七版)谢希仁中的教学标准)
4. SNA体系结构由IBM提出，是第一个网络体系结构。

### OSI参考模型
- 目的：支持异构网络系统的互联互通
- 提出者：国际标准化组织(ISO)于1984提出的开放系统互连(OSI)参考模型。  
- 层次结构：  
![QQ截图20201207163324.png](https://i.loli.net/2020/12/07/8ogNvIlXx6Luej5.png)  
>  其中最下面三层为通信子网，负责数据通信，最上面三层为资源子网，负责数据处理。  
- 通信过程  
![QQ截图20201207163952.png](https://i.loli.net/2020/12/07/AyTXmGjpdElPzkV.png)  

![QQ截图20201207164346.png](https://i.loli.net/2020/12/07/JUoKk5gPdvS2wqH.png)  
各个层次的作用：  
#### 应用层
所用能和用户交互产生网络流量的程序。  
##### 相关协议：  
- 文件传输(FTP)
- 电子邮件(SMTP)
- 万维网(HTTP)
....

#### 表示层
用于处理在两个通信系统中交换信息的表示方式(语法和语义)。
##### 功能
- 功能一：数据格式变换(把二进制代码转换为文字或者图片)  
- 功能二：数据加密解密
- 功能三：数据压缩和恢复

##### 相关协议
- 图片JPEG
- 文字ASCII

#### 会话层
向表示层实体/用户进程提供建立连接并在连接上有序地传输数据。  
这是会话，也是建立同步(SYN)   
##### 功能
- 功能一：建立、管理、终止回话
- 功能二：使用校验点可以使会话在通信失效时从校验点/同步点继续恢复通信，实现数据同步。(适用于传输大文件)

#### 相关协议
- ADSP
- ASP

#### 传输层
负责主机中两个进程的通信，即端到端的通信。传输单位是报文段或用户数据报。  
##### 功能
- 功能一：可靠传输、不可靠传输
- 功能二：差错控制
- 功能三：流量控制
- 功能四：复用分用

##### 相关协议
- TCP
- UDP

#### 网络层
主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务。网络层传输单位是数据报。  

##### 功能
- 功能一：路由选择(最佳路径)
- 功能二：流量控制
- 功能三：差错控制
- 功能四：拥塞控制

##### 相关协议
- IP
- IPX
- ICMP
- IGMP
- ARP
- RARP
- OSPF

#### 数据链路层
主要任务是把网络层传下来的数据报组装成帧。
数据链路层/链路层的传输单位是帧
##### 功能
- 功能一：成帧(定义帧的开始和结束)
- 功能二：差错控制(帧错+位错)
- 功能三：流量控制
- 功能四：访问(接入)控制控制对信道的访问

##### 相关协议
- SDLC
- HDLC
- PPP
- STP

#### 物理层
主要任务是在物理媒体上实现比特流的透明传输(指不管所传数据是什么样的比特组合，都应当能够在链路上传送)。  
物理层传输单位是比特。  

##### 功能
- 功能一：定义接口特性
- 功能二：定义传输模式(单工、半双工、双工)
- 功能三：定义传输速率
- 功能四：比特同步
- 功能五：比特编码

##### 相关协议
- Rj45
- IEEE 802.3

### TCP/IP参考模型
![QQ截图20201207174834.png](https://i.loli.net/2020/12/07/GDB79bEjA8vh2t4.png)

#### 与OSI的不同点
1. OSI定义三点：服务、协议、接口
2. OSI先出现，参考模型先于协议发明，不偏向特定协议
3. TCP/IP设计之初就考虑到异构网互联问题，将IP作为重要层次
4. 在运输层和网络层的连接方式上不同。  
![QQ截图20201207181458.png](https://i.loli.net/2020/12/07/B51ZdOajotK6grW.png)

### 5层参考模型
![QQ截图20201207182020.png](https://i.loli.net/2020/12/07/9VnowsZIeqbrYSE.png)

# 总结
![QQ截图20201207182339.png](https://i.loli.net/2020/12/07/M7Qaw2PXiszlEq4.png)